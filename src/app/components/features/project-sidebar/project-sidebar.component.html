<aside
  class="project-sidebar"
  [class.mobile]="isMobile"
  [@slideSidebar]="isMobile ? sidebarState : null"
  [class.collapsed]="isCollapsed"
  role="navigation"
  aria-label="Main sidebar"
>
  <!-- Top (sticky) -->
  @if (fixedHeader) {
    <div class="sidebar-top">
      <a class="navlink" [routerLink]="'/app'">
        <span class="icon">🚀</span>
        <span class="label" *ngIf="!isCollapsed">My App</span>
      </a>
    </div>
  }

  <!-- Scrollable middle -->
  <div class="sidebar-content">
    <nav>
      <ul>
        <li>
          <a
            class="navlink"
            [routerLink]="'/project/' + projectId + '/' + routePath.OVERVIEW"
            routerLinkActive="active"
            ariaCurrentWhenActive="page"
            [title]="routeName.OVERVIEW"
          >
            <span class="icon">🏠</span>
            <span class="label" *ngIf="!isCollapsed">{{ routeName.OVERVIEW }}</span>
          </a>
        </li>
        <li>
          <a
            class="navlink"
            [routerLink]="'/project/' + projectId + '/' + routePath.JOBS"
            routerLinkActive="active"
            ariaCurrentWhenActive="page"
            [title]="routeName.JOBS"
          >
            <span class="icon">⚙️</span>
            <span class="label" *ngIf="!isCollapsed">{{ routeName.JOBS }}</span>
          </a>
        </li>
        <li>
          <a
            class="navlink"
            [routerLink]="'/project/' + projectId + '/' + routePath.TASKS"
            routerLinkActive="active"
            ariaCurrentWhenActive="page"
            [title]="routeName.TASKS"
          >
            <span class="icon">⚙️</span>
            <span class="label" *ngIf="!isCollapsed">{{ routeName.TASKS }}</span>
          </a>
        </li>
        <li>
          <a
            class="navlink"
            [routerLink]="'/project/' + projectId + '/' + routePath.UPLOAD"
            routerLinkActive="active"
            ariaCurrentWhenActive="page"
            [title]="routeName.UPLOAD"
          >
            <span class="icon">📊</span>
            <span class="label" *ngIf="!isCollapsed">{{ routeName.UPLOAD }}</span>
          </a>
        </li>
        <li>
          <a
            class="navlink"
            [routerLink]="'/project/' + projectId + '/' + routePath.BUILDER"
            routerLinkActive="active"
            ariaCurrentWhenActive="page"
            [title]="routeName.BUILDER"
          >
            <span class="icon">📊</span>
            <span class="label" *ngIf="!isCollapsed">{{ routeName.BUILDER }}</span>
          </a>
        </li>
        <li>
          <a
            class="navlink"
            [routerLink]="'/project/' + projectId + '/' + routePath.ANALYSIS"
            routerLinkActive="active"
            ariaCurrentWhenActive="page"
            [title]="routeName.ANALYSIS"
          >
            <span class="icon">📊</span>
            <span class="label" *ngIf="!isCollapsed">{{ routeName.ANALYSIS }}</span>
          </a>
        </li>
      </ul>
    </nav>
  </div>

  <!-- Bottom (sticky) -->
  @if (fixedFooter) {
    <div class="sidebar-bottom">
      <button class="icon-btn" title="Help">❓</button>
      <button class="icon-btn" title="Logout">🔒</button>
    </div>
  }
</aside>

<!-- Backdrop (mobile only) -->
<div class="backdrop" *ngIf="isMobile && !isCollapsed" (click)="onBackdrop.emit()" aria-hidden="true"></div>
